const ModalSize = { Default: "modal-sm", Medium: "modal-md", Large: "modal-lg", XLarge: "modal-xl" }; class DynamicModal { constructor(e = "") { this.showDynamicModal = ((t = "", r, i, n = ModalSize, d, s = !0, c = (() => { }), u = (() => { })) => { $(".loadingContainer").show(), $("#placeHolderId" + e).val(d), $("#placeHolderId" + e).attr("closeModal", s), l = "", o = !1, $("#DynamicModal" + e).unbind().on("hidden.bs.modal", () => { $("#ModelContainer" + e).html("") }), $("#DynamicModal" + e + " > .modal-dialog").addClass(n); var m = "?"; $.each(i, (e, t) => { m += e + "=" + t + "&" }), $("#ModelTitle" + e).text(t), $.ajax({ type: "GET", url: r + m, datatype: "json", success: t => { var l = !1, o = !1, r = !1; if (null != t.StatusCode && "" != t.StatusDescription) { 500 == t.StatusCode ? l = !0 : 401 == t.StatusCode ? o = !0 : 203 == t.StatusCode && (r = !0); var i = DynamicAlert.init(); l && i.ShowAlert(t.StatusDescription, AlertType.Error), o && location.reload() } 0 == l && 0 == r && (null != t.HTML && "" != t.HTML ? $("#ModelContainer" + e).html(t.HTML) : $("#ModelContainer" + e).html(t), a(e, u), $("#DynamicModal" + e).modal("show")), $(".loadingContainer").hide(), 0 == l && "function" == typeof c && c() }, error: function () { $(".loadingContainer").hide(), DynamicAlert.init().ShowAlert("Internal Server Error", AlertType.Error) } }) }), this.Id = e; const t = e => { setTimeout(() => { var t = $("#" + $("#placeHolderId" + e).val()).css("background-color"); $("#" + $("#placeHolderId" + e).val()).css("background-color", "#adb5bd4d"), null == t || null == t || "" == t ? $("#" + $("#placeHolderId" + e).val()).animate({ backgroundColor: "" }, 4e3) : $("#" + $("#placeHolderId" + e).val()).animate({ backgroundColor: t }, 4e3) }, 100) }, a = function (e = "", a = null) { $("#ModelContainer" + e + " > form").each(function () { jQuery.validator.unobtrusive.parse(), null == $(this).attr("id") && $(this).attr("id", "form1"); var r = $(this).attr("id"); l = $("#" + r).serialize(), $("#DynamicModal" + e).on("hide.bs.modal", function (e) { if (l != $("#" + r).serialize() && 0 == o && 1 != confirm("There is some unsaved changes, Are you sure do you want to leave?")) return !1 }), jQuery.validator.unobtrusive.parse("#" + $(this).attr("id")), $(this).unbind().submit(function (i) { if (i.preventDefault(), !$(this).valid()) return !1; var n = $(this).attr("action"), d = $(this).attr("method"), s = $(this).serialize(); $(".loadingContainer").show(), $.ajax({ url: n, type: d, data: s, success: function (i) { var n = !1, d = !1; if (null != i.StatusCode && "" != i.StatusDescription) { if (500 == i.StatusCode ? n = !0 : 401 == i.StatusCode && (d = !0), d) return alert(i.StatusDescription), void location.reload(); var s = DynamicAlert.init(); n ? s.ShowAlert(i.StatusDescription, AlertType.Error) : s.ShowAlert(i.StatusDescription, AlertType.Success), "" != $("#placeHolderId" + e).val() && null != $("#placeHolderId" + e).val() && null != i.HTML && "" != i.HTML && ($("#" + $("#placeHolderId" + e).val()).html(i.HTML), t(e)) } else "" != $("#placeHolderId" + e).val() && null != $("#placeHolderId" + e).val() && (null != i.HTML && "" != i.HTML ? $("#" + $("#placeHolderId" + e).val()).html(i.HTML) : $("#" + $("#placeHolderId" + e).val()).html(i), t(e)); "function" == typeof a && 0 == n && a(), o = !0, "true" == $("#placeHolderId" + e).attr("closeModal") && 0 == n ? ($("#DynamicModal" + e).modal("hide"), $("#ModelContainer" + e).html("")) : (l = $("#" + r).serialize(), o = !1), $(".loadingContainer").hide() }, error: function (e, t, a) { alert("Error occurred!"), $(".loadingContainer").hide(), l = "" } }) }) }) }; var l = "", o = !1; this.hideModal = (() => { $("#DynamicModal" + this.Id).modal("hide") }) } static init(e = "") { return $("body").append('<div class="modal-dark modal fade" id="DynamicModal' + e + '" tabindex="-1" role="dialog" aria-labelledby="ModelTitle' + e + '" aria-hidden="true"><input type = "hidden" id = "placeHolderId' + e + '" /><div class="modal-dialog" role="document"><div class="modal-content" style="border: solid 1px;"><div class="modal-header text-center"><span class="modal-title h3 text-center" id="ModelTitle' + e + '"> </span><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button></div><div class="modal-body" id="ModelContainer' + e + '"></div><div class="modal-footer"><button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button></div></div></div></div>'), new DynamicModal(e) } } const AlertType = { Error: "alert-danger", Success: "alert-success", Info: "alert-info" }; var DynamicAlertCount = 0; class DynamicAlert { constructor() { this.ShowAlert = ((a, l = AlertType) => { t(DynamicAlertCount += 1), $("#DynamicAlert" + DynamicAlertCount).removeClass("alert-danger").removeClass("alert-success").removeClass("alert-info"), $("#DynamicAlert" + DynamicAlertCount).addClass(l), $("#DynamicAlertMessage" + DynamicAlertCount).html(a), e(DynamicAlertCount) }), this.ShowAlertAjax = (e => { t(DynamicAlertCount += 1); var a = !1, l = !1; if ($("#DynamicAlert" + DynamicAlertCount).removeClass("alert-danger").removeClass("alert-success").removeClass("alert-info"), null != e.StatusCode && "" != e.StatusDescription) return $("#DynamicAlertMessage" + DynamicAlertCount).html(e.StatusDescription), 500 == e.StatusCode ? (a = !0, $("#DynamicAlert" + DynamicAlertCount).addClass(AlertType.Error)) : 401 == e.StatusCode ? (l = !0, $("#DynamicAlert" + DynamicAlertCount).addClass(AlertType.Error), alert(e.StatusDescription)) : $("#DynamicAlert" + DynamicAlertCount).addClass(AlertType.Success), l && location.reload(), !a }); const e = e => { setTimeout(function () { $("#DynamicAlert" + e).alert("close") }, 8e3) }, t = e => { $("div#DynamicAlerts").append('<div class="col-12 alert alert-dismissible"  style="z-index:100000" Id="DynamicAlert' + e + '"  role="alert" ><button class="close"  style="width:10px; height:10px;color:black;  padding-bottom: 19px;" type="button" data-dismiss="alert" aria-hidden="true"><span class="">x</span> </button> <span id="DynamicAlertMessage' + e + '"></span></div>') } } static init() { return 0 == $("#DynamicAlerts").length && $("body").prepend('<div id="DynamicAlerts" class="container-fluid" style="position: -webkit-sticky; position: fixed !important; top: 0px; z-index: 100000000000; min-width:100%;"></div>'), new DynamicAlert } }